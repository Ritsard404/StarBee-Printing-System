
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Reset Password</title>
    <link href="~/Content/Authentication Styles/LoginStyle.css" rel="stylesheet" />
    <link href="~/Bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <style>

        .center-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
    </style>
</head>
<body>
    <form id="customerForm" class="needs-validation" action="../Authentication/ResetPassword" method="post" enctype="multipart/form-data" novalidate>
        <div class="container center-container">
            <div class="row">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">
                            Register New Password
                        </h3><hr />
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="custPass">New Password</label>
                                <input type="password" class="form-control" id="custPass" name="newPass" pattern=".{8,}" placeholder="Password" required>
                                <div class="valid-feedback">
                                    Valid Password
                                </div>
                            </div>
                         </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="custConPass">Confirm Password</label>
                                <input type="password" class="form-control" id="custConPass" placeholder="Re-enter Password" oninput='this.setCustomValidity(this.value != document.getElementById("custPass").value ? "Passwords do not match." : "")' required>
                                <div class="valid-feedback">
                                    Password match!
                                </div>
                            </div>
                        </div><br />
                        <button class="btn btn-primary" type="submit" id="submitForm">Reset Password</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <script src="~/Bootstrap/script/popper.min.js"></script>
    <script src="~/Bootstrap/script/jquery-3.3.1.slim.min.js"></script>
    <script src="~/Bootstrap/script/bootstrap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');

            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    } else {
                        // Show SweetAlert2 confirmation
                        Swal.fire({
                            title: "Reset Password?",
                            text: "Click Reset to continue.",
                            icon: "info",
                            showCancelButton: true,
                            confirmButtonColor: '#DD6B55',
                            confirmButtonText: 'c',
                            cancelButtonText: "Cancel",
                            allowOutsideClick: false,
                            allowEscapeKey: false,
                        }).then((result) => {
                            if (result.isConfirmed) {
                                Swal.fire("Reset Successfull!", "You have successfully reset your new password!", "success").then(() => {
                                // Reset the form here
                                form.submit();
                                /*});*/
                            }
                        });
                    }

                    form.classList.add('was-validated');
                }, false);
            });
        });
    </script>
</body>
</html>
